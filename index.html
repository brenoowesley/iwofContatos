<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@iwof_br | Links</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* Cores da marca */
        .text-iwof-pink {
            color: #E8368F;
        }

        .bg-iwof-pink {
            background-color: #E8368F;
        }

        .bg-iwof-pink:hover {
            background-color: #d12e80;
        }

        /* Card de link estilo Linktree */
        .link-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #1a1a1a;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .link-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        .link-card.inactive {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .link-card.inactive:hover {
            transform: none;
        }

        /* √çcone do card */
        .link-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .link-icon svg {
            width: 24px;
            height: 24px;
        }

        /* T√≠tulo da categoria */
        .category-title {
            color: #ffffff;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 16px;
            margin-top: 32px;
        }

        .category-title:first-of-type {
            margin-top: 24px;
        }

        /* √çcones sociais */
        .social-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            transition: opacity 0.2s;
        }

        .social-icon:hover {
            opacity: 0.8;
        }

        /* Logo circular */
        .logo-container {
            width: 96px;
            height: 96px;
            border-radius: 50%;
            background-color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            overflow: hidden;
        }

        .logo-container img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        /* Loading spinner */
        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* Bot√£o CTA no rodap√© */
        .cta-button {
            background-color: #E8368F;
            color: white;
            padding: 14px 32px;
            border-radius: 24px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
        }

        .cta-button:hover {
            background-color: #d12e80;
            transform: scale(1.02);
        }
    </style>
</head>

<body>
    <div class="w-full max-w-md mx-auto px-4 py-8 min-h-screen flex flex-col">

        <!-- Cabe√ßalho com logo e perfil -->
        <header class="text-center">
            <!-- Logo circular -->
            <div class="logo-container">
                <img src="https://i.imgur.com/YourLogoHere.png" alt="Logo iWof"
                    onerror="this.parentElement.innerHTML='<span class=\'text-3xl font-bold text-iwof-pink\'>iWof</span>'">
            </div>

            <!-- Nome do perfil -->
            <h1 class="text-xl font-bold text-white">@iwof_br</h1>

            <!-- Descri√ß√£o -->
            <p class="text-gray-400 mt-1 text-sm">Trabalhe do seu jeito, fazendo sua pr√≥pria escala. üíú</p>

            <!-- √çcones sociais -->
            <div class="flex justify-center gap-4 mt-4">
                <!-- Instagram -->
                <a href="https://instagram.com/iwof_br" target="_blank" rel="noopener noreferrer" class="social-icon"
                    title="Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <!-- WhatsApp -->
                <a href="https://wa.me/5511999999999" target="_blank" rel="noopener noreferrer" class="social-icon"
                    title="WhatsApp">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"
                        fill="currentColor">
                        <path
                            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
                    </svg>
                </a>
            </div>
        </header>

        <!-- Indicador de Carregamento -->
        <div id="loading" class="flex justify-center items-center py-16">
            <svg class="spinner h-8 w-8 text-iwof-pink" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
            </svg>
        </div>

        <!-- Mensagem de Erro -->
        <div id="error-message"
            class="hidden bg-red-900/50 border border-red-500 text-red-200 p-4 rounded-lg text-center text-sm">
            <p>N√£o foi poss√≠vel carregar os links. Tente novamente mais tarde.</p>
        </div>

        <!-- Container para os links agrupados por categoria -->
        <main id="link-container" class="flex-grow">
            <!-- Links ser√£o injetados aqui pelo JavaScript -->
        </main>

        <!-- Rodap√© -->
        <footer class="text-center mt-8 pt-8 border-t border-gray-800">
            <a href="https://iwof.com.br" target="_blank" rel="noopener noreferrer" class="cta-button">
                Join iWofBrasil
            </a>
            <p class="text-gray-600 text-xs mt-6">&copy; <span id="current-year"></span> iWof. Todos os direitos
                reservados.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // URL da planilha publicada
            const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT2y56LkAI0gPlnI8b6Y9m2v0BS3nLGFeVLwimOUm5cuS-gMaa7HsxGGrezgyWPgtaJskbS1kgJvw-K/pub?output=csv';

            // URL do Web App de tracking (Google Apps Script)
            const TRACKING_API_URL = 'https://script.google.com/macros/s/AKfycbxfXIz4NzrP1KOfWeIccpsumupUypNy7wvN20LM0_j3ruoSAERp98dR_9WJ55K9oQGg/exec';

            // Refer√™ncias aos elementos do DOM
            const linkContainer = document.getElementById('link-container');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('error-message');
            document.getElementById('current-year').textContent = new Date().getFullYear();

            // √çcones por tipo
            const ICONS = {
                whatsapp: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#25D366"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>`,
                link: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#E8368F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>`,
                cadastro: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#E8368F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line></svg>`,
                android: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#3DDC84"><path d="M17.523 15.341a.85.85 0 0 0 .85-.849v-4.51a.85.85 0 0 0-1.7 0v4.51a.85.85 0 0 0 .85.85zm-11.046 0a.85.85 0 0 0 .85-.849v-4.51a.85.85 0 0 0-1.7 0v4.51a.85.85 0 0 0 .85.85zM15.2 5.2l1.138-2.072a.24.24 0 1 0-.42-.231L14.76 5.02a6.036 6.036 0 0 0-5.52 0L8.082 2.897a.24.24 0 1 0-.42.23L8.8 5.2a5.59 5.59 0 0 0-3.05 4.95h12.5A5.59 5.59 0 0 0 15.2 5.2zM9.65 8.1a.6.6 0 1 1 .6-.6.6.6 0 0 1-.6.6zm4.7 0a.6.6 0 1 1 .6-.6.6.6 0 0 1-.6.6zM5.75 10.65v6.1a1.65 1.65 0 0 0 1.65 1.65h.5v2.45a.85.85 0 0 0 1.7 0v-2.45h2.8v2.45a.85.85 0 0 0 1.7 0v-2.45h.5a1.65 1.65 0 0 0 1.65-1.65v-6.1z"/></svg>`,
                ios: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#000000"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>`,
                camisa: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#FFD700"><path d="M20.38 8.57l-1.23 1.85a1 1 0 0 1-.84.45H16V6h3.62a1 1 0 0 1 .76.35l0 0a1 1 0 0 1 0 1.17zM4.38 10.87a1 1 0 0 1-.84-.45L2.31 8.57a1 1 0 0 1 0-1.17l0 0A1 1 0 0 1 3.07 7H6v4zM7 11V6h10v5a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1zm-1 1h12v8a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1z"/></svg>`,
                ajuda: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#E8368F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>`,
                site: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#E8368F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>`
            };

            // Fun√ß√£o para registrar o clique no link
            function trackClick(linkName) {
                console.log('üîπ Tracking clique:', linkName);
                const params = new URLSearchParams({
                    link: linkName,
                    t: Date.now()
                });
                const img = new Image();
                img.src = `${TRACKING_API_URL}?${params.toString()}`;
            }

            // Fun√ß√£o principal para buscar e renderizar os dados
            async function fetchData() {
                loading.classList.remove('hidden');
                errorMessage.classList.add('hidden');
                linkContainer.innerHTML = '';

                try {
                    const response = await fetch(CSV_URL);

                    if (!response.ok) {
                        throw new Error('Falha ao buscar CSV');
                    }

                    const csvText = await response.text();
                    const data = parseCSV(csvText);
                    renderData(data);

                } catch (error) {
                    console.error("Erro ao carregar dados:", error);
                    errorMessage.classList.remove('hidden');
                } finally {
                    loading.classList.add('hidden');
                }
            }

            // Fun√ß√£o para converter CSV em array de objetos
            // Colunas esperadas: Contato, Nome, Status, Tipo, Categoria
            function parseCSV(text) {
                const lines = text.split('\n').filter(line => line.trim() !== '');
                if (lines.length === 0) return [];

                const data = lines.slice(1).map(line => {
                    const parts = line.match(/(?:[^,"']+|"[^"]*")+/g);
                    if (!parts || parts.length < 3) return null;

                    const [contato, nome, status, tipo, categoria] = parts.map(part =>
                        part.replace(/^"|"$/g, '').trim()
                    );

                    return {
                        contato: contato || '',
                        nome: nome || '',
                        status: status ? status.toLowerCase() : '',
                        tipo: tipo ? tipo.toLowerCase() : 'link',
                        categoria: categoria || 'Links'
                    };
                }).filter(item => item && item.nome && item.status);

                return data;
            }

            // Fun√ß√£o para renderizar os dados agrupados por categoria
            function renderData(data) {
                linkContainer.innerHTML = '';

                if (data.length === 0) {
                    linkContainer.innerHTML = '<p class="text-center text-gray-500 py-8">Nenhum link encontrado.</p>';
                    return;
                }

                // Agrupa por categoria mantendo a ordem de apari√ß√£o
                const categories = [];
                const categoryMap = new Map();

                data.forEach(item => {
                    if (!categoryMap.has(item.categoria)) {
                        categoryMap.set(item.categoria, []);
                        categories.push(item.categoria);
                    }
                    categoryMap.get(item.categoria).push(item);
                });

                // Renderiza cada categoria
                categories.forEach(category => {
                    const items = categoryMap.get(category);

                    // T√≠tulo da categoria
                    const titleEl = document.createElement('h2');
                    titleEl.className = 'category-title';
                    titleEl.textContent = category;
                    linkContainer.appendChild(titleEl);

                    // Container dos links dessa categoria
                    const categoryContainer = document.createElement('div');
                    categoryContainer.className = 'space-y-3';

                    items.forEach(item => {
                        const card = createLinkCard(item);
                        categoryContainer.appendChild(card);
                    });

                    linkContainer.appendChild(categoryContainer);
                });
            }

            // Fun√ß√£o para obter √≠cone baseado no tipo ou nome
            function getIcon(tipo, nome) {
                const nomeLower = nome.toLowerCase();

                if (nomeLower.includes('cadastro') || nomeLower.includes('acelere')) return ICONS.cadastro;
                if (nomeLower.includes('android')) return ICONS.android;
                if (nomeLower.includes('ios') || nomeLower.includes('iphone')) return ICONS.ios;
                if (nomeLower.includes('camisa') || nomeLower.includes('camiseta')) return ICONS.camisa;
                if (nomeLower.includes('ajuda') || nomeLower.includes('central')) return ICONS.ajuda;
                if (nomeLower.includes('site')) return ICONS.site;
                if (tipo === 'whatsapp') return ICONS.whatsapp;

                return ICONS.link;
            }

            // Fun√ß√£o para criar um card de link
            function createLinkCard(item) {
                const { nome, contato, status, tipo } = item;
                const isActive = status === 'ativo';

                let href = '#';
                if (isActive) {
                    if (tipo === 'whatsapp') {
                        const waNumber = contato.replace(/\D/g, '');
                        href = `https://wa.me/${waNumber}`;
                    } else {
                        href = contato.match(/^https?:\/\//) ? contato : `https://${contato}`;
                    }
                }

                const el = document.createElement(isActive ? 'a' : 'div');
                el.className = `link-card ${isActive ? '' : 'inactive'}`;

                if (isActive) {
                    el.href = href;
                    el.target = '_blank';
                    el.rel = 'noopener noreferrer';
                    el.addEventListener('click', () => trackClick(nome));
                }

                el.innerHTML = `
                    <div class="link-icon">
                        ${getIcon(tipo, nome)}
                    </div>
                    <div class="flex-grow text-center">
                        <span class="font-medium text-sm">${nome}</span>
                    </div>
                    <div class="w-8"></div>
                `;

                return el;
            }

            fetchData();
        });
    </script>

</body>

</html>